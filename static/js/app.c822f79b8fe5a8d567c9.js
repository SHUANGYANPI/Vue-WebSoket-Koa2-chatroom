webpackJsonp([0],{"+6NV":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAABTUlEQVQ4T62TYVXDQBCEZxwgoTioA+KgcUBRQFFAHVAcFAfFQSTEAcVBHEyZ617fcQ0kvMf+yXu53W/2ZveIfwqOcSQ1AO4BLAHcRs4HgB7AG8murvsGkuTCFwCfAA4kD2VBCKwBLACsSR7z+QUUEBc64UqxAlpwB2BD0l0igSTdRNttPpiyLmos2JAcMsj0I0l/Z4ek1j6S3GbQ4HubPJsSiZI6kg2jRRvrSaWQtAHghD5UYePDxzuSr0XuBeQJ7CuQO9v6qpLS5Ei2IeD/9jSLnkHRwVAe/uV6knqSywyy6m5q7LVA7JVXoM0g+2OQ92N22OiwoCsXcm+fATzNmZ4k59sSD+a8kIVx3iPvxjOA9xoYE165izhPkCtQGO9rOsEFnuZD/LfIowFjfo6+/qJDDyG9pVhYP9jRmAJ5X2yon4+v/GP8Cpo9vq/EE2mepxOh2SfjAAAAAElFTkSuQmCC"},"2Bxi":function(t,s,e){t.exports=e.p+"static/img/2.1f2018d.jpg"},"5e9m":function(t,s,e){t.exports=e.p+"static/img/0.c67ecf1.jpg"},"76c1":function(t,s){},Ik0N:function(t,s,e){t.exports=e.p+"static/img/9.7e016f8.jpg"},LbR4:function(t,s){},M1XX:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABdElEQVRIS+2W4VHDMAyF35sANgA2KBuEDWCClgnoBsAEwASUCegGwAZsQEfIBuJeTk6NaVKHq8mf6C7Xu6j2J8nRs4iRjCNx0YLN7BjAHIB+S9kTyVqbN2CHfjn0oxB1JhSAc5KbAL4DsAQw08sSYE/uE8Ca5DIGVySrEtCwp5k9enLVf4NV2SbBCVz6jKdSW1uCuJ3MTE0Pkuq/H5bhq1NNMNtyOr9qM7sE8Oo0qU0LT3xXJNdRry4APHes23/GZiYle/ANrkmuOjZPffG6NKgssC4LRS9bBXGPtL3PJ8CGpJSqtaxSl5DOCaz7eGc7HbrcU6lDqeckzw5d3qSd3r3NFkG5JI16+QbglzwmwbzskEL1/M2eoHXz6WlUMJ4yBZfqnPZsIMAJgItEQhWsfH3zmnwSIiW4HW9zS2xmWnjk8Nq/1NuQSe4+gwd6nxYVvS4QZSpZvCeplsy2wWDXah2LbiSVXUO6jmiQ/Qk8iNDx59HA33M2Dy6CnGmxAAAAAElFTkSuQmCC"},M1a8:function(t,s,e){t.exports=e.p+"static/img/7.75ee137.jpg"},NHnr:function(t,s,e){"use strict";function i(t){e("76c1")}function n(t){e("tgZR")}function a(t){e("LbR4")}function c(t){e("ayfa")}function r(t){e("h43c")}Object.defineProperty(s,"__esModule",{value:!0});var o=e("7+uW"),u={data:function(){return{hello:"Vue+Koa2+WebSocket ChatRoom"}}},l=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"banner"},[i("span",{staticClass:"banner-message"},[t._v(t._s(t.hello))]),t._v(" "),i("img",{attrs:{src:e("M1XX")}})])},g=[],m={render:l,staticRenderFns:g},p=m,A=e("VU/8"),f=i,d=A(u,p,!1,f,null,null),v=d.exports,S={props:["message"],data:function(){return{tips:"",imgList:[{imgSrc:e("5e9m")},{imgSrc:e("tGse")},{imgSrc:e("2Bxi")},{imgSrc:e("lQgp")},{imgSrc:e("poA4")},{imgSrc:e("vGcb")},{imgSrc:e("k9Qt")},{imgSrc:e("M1a8")},{imgSrc:e("Rc0q")},{imgSrc:e("Ik0N")}]}},methods:{sendMessage:function(){if(""===this.tips)return void alert("不能发送空消息");this.$emit("send",this.tips),this.tips=""}}},C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"message-list"},[e("div",{staticClass:"border"},[t._m(0,!1,!1),t._v(" "),e("div",{staticClass:"chat-list"},[e("ul",[t._l(t.message,function(s,i){return[e("li",{key:i},[e("img",{staticClass:"avaturl",attrs:{src:t.imgList[s.user.image].imgSrc}}),t._v(" "),e("span",{staticClass:"nickname"},[t._v(t._s(s.user.name))]),t._v("\n            "+t._s(s.data)+"\n          ")])]})],2)]),t._v(" "),e("div",{staticClass:"chat-send"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tips,expression:"tips"}],staticClass:"chat-input",attrs:{type:"text",placeholder:"说点什么吧"},domProps:{value:t.tips},on:{keyup:function(s){if(!("button"in s)&&t._k(s.keyCode,"enter",13,s.key))return null;t.sendMessage(s)},input:function(s){s.target.composing||(t.tips=s.target.value)}}}),t._v(" "),e("button",{staticClass:"chat-send-button",on:{click:t.sendMessage}},[t._v("发送消息")])])])])},h=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"chat-list-title"},[i("img",{attrs:{src:e("+6NV")}}),t._v("\n        聊天室\n    ")])}],k={render:C,staticRenderFns:h},_=k,x=e("VU/8"),b=n,E=x(S,_,!1,b,null,null),y=E.exports,Q={props:["users"],data:function(){return{imgList:[{imgSrc:e("5e9m")},{imgSrc:e("tGse")},{imgSrc:e("2Bxi")},{imgSrc:e("lQgp")},{imgSrc:e("poA4")},{imgSrc:e("vGcb")},{imgSrc:e("k9Qt")},{imgSrc:e("M1a8")},{imgSrc:e("Rc0q")},{imgSrc:e("Ik0N")}]}}},V=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user-list"},[e("div",{staticClass:"border"},[e("div",{staticClass:"user-list-title"},[t._v("\n        用户\n    ")]),t._v(" "),e("div",{staticClass:"user-enum"},[e("ul",[t._l(t.users,function(s,i){return[e("li",{key:i},[e("img",{staticClass:"avaturl",attrs:{src:t.imgList[s.image].imgSrc}}),t._v(" "),e("span",{staticClass:"nickname"},[t._v(t._s(s.name))])])]})],2)])])])},w=[],B={render:V,staticRenderFns:w},L=B,N=e("VU/8"),j=a,R=N(Q,L,!1,j,null,null),G=R.exports,q={components:{"message-list":y,"user-list":G},data:function(){return{msgList:[],usgList:[],ws:""}},created:function(){function t(t,s){for(var e=0,i=t.length;e<i;e++)if(t[e].id===s.id)return;t.push(s)}function s(t,s){t.push(s)}function e(t,s){for(var e=-1,i=0,n=t.length;i<n;i++)if(t[i].id===s.id){e=i;break}e>=0&&t.splice(e,1)}var i=new WebSocket("ws://"+location.hostname+":3000/ws/chat");this.ws=i;var n=this;i.onmessage=function(i){var a=i.data;console.log(a);var c=JSON.parse(a);"list"===c.type||("join"===c.type?(t(n.usgList,c.user),s(n.msgList,c)):"left"===c.type?(e(n.usgList,c.user),s(n.msgList,c)):"chat"===c.type&&s(n.msgList,c))}},methods:{send:function(t){console.log(t),this.ws.send(t.trim())}}},M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"message"},[e("message-list",{staticClass:"left",attrs:{message:t.msgList},on:{send:t.send}}),t._v(" "),e("user-list",{staticClass:"right",attrs:{users:t.usgList}})],1)},H=[],U={render:M,staticRenderFns:H},D=U,I=e("VU/8"),J=c,O=I(q,D,!1,J,null,null),X=O.exports,F={components:{"chat-head":v,"chat-body":X}},Z=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("chat-head"),t._v(" "),e("chat-body")],1)},P=[],W={render:Z,staticRenderFns:P},T=W,z=e("VU/8"),K=r,Y=z(F,T,!1,K,null,null),$=Y.exports;new o.a({el:"#app",render:function(t){return t($)}})},Rc0q:function(t,s,e){t.exports=e.p+"static/img/8.3dc6907.jpg"},ayfa:function(t,s){},h43c:function(t,s){},k9Qt:function(t,s,e){t.exports=e.p+"static/img/6.b20ee87.jpg"},lQgp:function(t,s,e){t.exports=e.p+"static/img/3.a12e8bb.jpg"},poA4:function(t,s,e){t.exports=e.p+"static/img/4.a657a2c.jpg"},tGse:function(t,s,e){t.exports=e.p+"static/img/1.4d11d24.jpg"},tgZR:function(t,s){},vGcb:function(t,s,e){t.exports=e.p+"static/img/5.8146952.jpg"}},["NHnr"]);
//# sourceMappingURL=app.c822f79b8fe5a8d567c9.js.map